# Playwright E2E Testing with Claude Code

After TDD with unit tests, you need end-to-end (E2E) tests to verify your entire application works from the user's perspective. Here's the vibe coding approach: **you don't write Playwright tests. Claude Code does.**

## The Vibe Coding Testing Strategy

**You understand:**
- What needs to be tested (user flows)
- When tests should pass or fail
- How to describe behavior in plain English

**Claude Code handles:**
- Writing Playwright test code
- Setting up Page Objects
- Handling async/waits
- Fixing flaky tests
- Debugging failures

## Setup: One Conversation

**You:** "Set up Playwright for E2E testing in my Next.js project"

**Claude Code:**
1. Runs `npm init playwright@latest`
2. Configures `playwright.config.ts` for your project
3. Sets up test database fixtures
4. Adds GitHub Actions workflow
5. Creates example test to verify setup

**Done in 5 minutes.** You never touch the Playwright docs.

## Writing Tests: Describe, Don't Code

Instead of learning Playwright API, you describe user behavior:

**You:** "Write an E2E test for the login flow. User enters email and password, clicks sign in, should see dashboard."

**Claude Code generates:**

{lang=typescript}
```
// e2e/auth/login.spec.ts
import { test, expect } from '@playwright/test';

test('user can sign in with email and password', async ({ page }) => {
  await page.goto('/login');

  await page.getByLabel('Email').fill('test@example.com');
  await page.getByLabel('Password').fill('password123');
  await page.getByRole('button', { name: 'Sign In' }).click();

  await expect(page).toHaveURL('/dashboard');
  await expect(page.getByText('Welcome back')).toBeVisible();
});
```

**You review:** "Looks good" → commit.

**No need to learn:**
- Playwright selectors
- Async/await patterns
- Page Object Model
- Fixture setup

Claude Code knows all that.

## What You Actually Do

### 1. Describe User Flows

{lang=text}
```
"Write E2E tests for:
1. User signs up with email
2. User creates a task
3. User drags task to different column
4. Another user sees the change (real-time)"
```

### 2. Run Tests

{lang=bash}
```
npx playwright test
```

### 3. Review Results

Tests pass → Ship it.

Tests fail → Tell Claude Code the error.

### 4. Fix Failures with Claude Code

**You:** "Test 'user creates task' is failing with 'Element not found'. Here's the error..."

**Claude Code:**
1. Analyzes error
2. Checks if element selector changed
3. Fixes test
4. Explains why it failed

**You:** "Run tests again"

If still failing → repeat. Claude Code debugs iteratively.

## The Debugging Workflow

**Traditional approach:**
1. Test fails
2. Read Playwright docs
3. Learn about `waitForSelector`
4. Add waits everywhere
5. Still flaky
6. Give up

**Vibe coding approach:**
1. Test fails
2. Copy error to Claude Code
3. Claude fixes it
4. Done

**Example:**

**You:** "Test failed with 'Timeout waiting for button'. Here's the trace."

**Claude Code:**
```
The button is loading asynchronously. I'll add a wait for the API call:

await page.waitForResponse(resp => resp.url().includes('/api/tasks'));
await page.getByRole('button', { name: 'Create' }).click();

This ensures the button is enabled before clicking.
```

**You:** "Thanks, push that fix"

## What Tests to Request

Ask Claude Code to write E2E tests for:

✅ **Critical user journeys:**
- "Test signup → create task → complete task flow"
- "Test login → edit profile → logout"

✅ **Complex interactions:**
- "Test drag-and-drop in kanban board"
- "Test real-time updates with two users"

✅ **Business-critical flows:**
- "Test payment checkout process"
- "Test data export feature"

❌ **Don't test every detail:**
- Individual functions (unit tests)
- Edge cases (unit tests)
- Every button click (wasteful)

**Rule:** If losing this flow would seriously harm users, E2E test it.

## Maintaining Tests

**When UI changes:**

**You:** "I renamed the 'Create Task' button to 'New Task'. Update E2E tests."

**Claude Code:**
1. Finds all tests referencing that button
2. Updates selectors
3. Runs tests to verify
4. Reports: "Updated 3 tests, all passing"

**When adding features:**

**You:** "I added task priority field. Write E2E test for creating high-priority task."

**Claude Code:**
1. Examines new UI code
2. Writes test for new feature
3. Uses existing patterns from other tests
4. Adds to test suite

## Playwright's Auto-Debugging Tools

You don't need to learn these, but know they exist for when Claude Code mentions them:

**Trace Viewer:**
- Records everything the test did
- Shows screenshots at each step
- Claude Code uses this to debug failures
- You just send Claude the trace file

**Inspector:**
- Pauses test execution
- Claude Code asks you to run with `--debug` if needed
- You don't use it directly

**Screenshot/Video:**
- Auto-captured on failure
- You send to Claude Code
- Claude identifies the issue

## CI Integration

**You:** "Set up Playwright tests in GitHub Actions"

**Claude Code:**
1. Creates `.github/workflows/playwright.yml`
2. Configures to run on PRs
3. Uploads test artifacts (traces, videos)
4. Adds status check to PRs

**When CI fails:**

1. Download artifacts from GitHub Actions
2. Send trace file to Claude Code
3. Claude Code: "The test failed because [reason], here's the fix"
4. Push fix, CI goes green

## The Learning Curve

**Traditional E2E testing:**
- Week 1: Learn Playwright API
- Week 2: Set up test infrastructure
- Week 3: Write first flaky test
- Week 4: Learn to debug flaky tests
- Week 5: Finally productive

**Vibe coding E2E testing:**
- Minute 1: "Claude, set up Playwright"
- Minute 5: Setup complete
- Minute 10: First test written (by Claude)
- Minute 15: Test passing
- Productive immediately

## Real Example: TaskFlow E2E Tests

**You:** "Write E2E tests for TaskFlow covering:
1. User authentication
2. CRUD operations on tasks
3. Kanban board drag-and-drop
4. Real-time updates"

**Claude Code:** (5 minutes later)

```
I've created 8 E2E tests in e2e/:

✅ auth/login.spec.ts - Email/password login
✅ auth/signup.spec.ts - User registration
✅ tasks/create.spec.ts - Create task with all fields
✅ tasks/edit.spec.ts - Edit task
✅ tasks/delete.spec.ts - Delete task
✅ kanban/drag-drop.spec.ts - Drag task between columns
✅ kanban/filters.spec.ts - Filter tasks
✅ realtime/collaboration.spec.ts - Two users see changes

All tests passing. Run with: npx playwright test
```

**You:** "Great, commit those"

## Advanced: When You DO Learn Playwright

**After shipping with Claude Code for a while**, you might want to understand Playwright:

- Read tests Claude Code wrote
- Recognize patterns
- Modify tests yourself for speed
- Still ask Claude for complex stuff

**But you don't NEED to.** Many successful developers use this workflow:
1. Describe behavior
2. Claude writes test
3. Run test
4. Ship

**The goal isn't to learn every tool. The goal is to ship fast without breaking things.**

## Summary

**Vibe coding E2E testing:**
- You describe user flows in English
- Claude Code writes Playwright tests
- You run tests and ship
- Claude Code debugs failures
- You stay focused on building features

**Time saved:**
- 0 hours learning Playwright
- 0 hours writing boilerplate
- 0 hours debugging flaky tests
- More hours shipping features

Next chapter covers the specific patterns Claude Code uses, so you understand what's happening under the hood.

T> **You Don't Need to Be an Expert**
T>
T> The vibe coding philosophy: Master the workflow and tools that amplify you (v0, Supabase, Claude Code). Let Claude Code master the testing frameworks. Your expertise is understanding WHAT needs to work, not HOW to write the test code.
